terraform {
  required_providers {
    azapi = {
      source = "Azure/azapi"
    }
  }
}

provider "azapi" {
  skip_provider_registration = false
}

resource "azapi_resource" "resourceGroup" {
  type      = "Microsoft.Resources/resourceGroups@2020-06-01"
  parent_id = "/subscriptions/85b3dbca-5974-4067-9669-67a141095a76"
  name      = "testaccRG-batch-221102104153185984"
  location  = "westeurope"
  body      = jsonencode({})
  tags      = {}
}

resource "azapi_resource" "batchAccount" {
  type      = "Microsoft.Batch/batchAccounts@2022-01-01"
  parent_id = azapi_resource.resourceGroup.id
  name      = "testaccbatchzdwec"
  location  = azapi_resource.resourceGroup.location
  body = jsonencode({
    properties = {
      encryption = {
        keySource = "Microsoft.Batch"
      }
      poolAllocationMode  = "BatchService"
      publicNetworkAccess = "Enabled"
    }
  })
  tags = {}
}

resource "azapi_resource" "certificate" {
  type      = "Microsoft.Batch/batchAccounts/certificates@2022-01-01"
  parent_id = azapi_resource.batchAccount.id
  name      = "SHA1-42c107874fd0e4a9583292a2f1098e8fe4b2edda"

  body = jsonencode({
    properties = {
      data                = "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"
      format              = "Pfx"
      thumbprint          = "42c107874fd0e4a9583292a2f1098e8fe4b2edda"
      thumbprintAlgorithm = "SHA1"
    }
  })

}
